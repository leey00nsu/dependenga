# Implementation Plan: 취약점 분석

## 개요
파싱된 의존성의 보안 취약점을 OSV API를 통해 조회하고 표시

---

## Proposed Changes

### Entities Layer

#### [NEW] `src/entities/vulnerability/model/types.ts`
- `Severity` 타입: "critical" | "high" | "medium" | "low"
- `Vulnerability` 인터페이스: id, severity, title, description, affectedVersions, fixedVersion
- `PackageVulnerability` 인터페이스: packageName, version, vulnerabilities, maxSeverity

---

### Shared Layer

#### [NEW] `src/shared/api/osv-client.ts`
OSV API 호출 클라이언트
```typescript
// POST https://api.osv.dev/v1/query
// Body: { package: { name, ecosystem: "npm" }, version }
async function queryOSV(packageName: string, version: string): Promise<OSVResponse>
```

---

### Features Layer

#### [NEW] `src/features/vulnerability-analyzer/model/schemas.ts`
- OSV API 응답 Zod 스키마
- CVSS → Severity 변환 로직

#### [NEW] `src/features/vulnerability-analyzer/lib/analyze-vulnerabilities.ts`
- 의존성 목록 → 취약점 정보 변환
- maxSeverity 계산

#### [NEW] `src/features/vulnerability-analyzer/api/analyze-package.ts`
Server Action - 패키지 취약점 분석

#### [NEW] `src/features/vulnerability-analyzer/ui/vulnerability-result.tsx`
취약점 결과 표시 UI (심각도별 색상)

---

### Views Layer

#### [MODIFY] `src/views/home-view.tsx`
- 의존성 파싱 후 취약점 분석 버튼 추가
- 취약점 결과 표시 연동

---

## Verification Plan

### Automated Tests
```bash
pnpm test --run
```
- `analyze-vulnerabilities.test.ts`: severity 계산, maxSeverity 로직
- OSV API mock 테스트

### Browser Test
1. `pnpm dev` 실행
2. http://localhost:3000 접속
3. package.json 입력 (예: lodash 취약점 있는 버전)
4. "의존성 분석" 클릭
5. "취약점 분석" 클릭
6. 취약점 정보 표시 확인

### Manual Verification
- 실제 취약점이 있는 패키지로 테스트 (예: lodash@4.17.20)
